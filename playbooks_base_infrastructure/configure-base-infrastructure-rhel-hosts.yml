---
- name: Configuring base RHEL kvm hosts
  hosts: kvm_hosts
  become: True
  roles:
    - role: host-setup-common
  vars:
    domain: acanorex.io
    rhsm_sys_release_version: 9
    rhsm_org_id: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31313163666364356136356336346263343061336234316135666238396631323536373539326533
          6435636135343236666538343661316139353536346261330a396233616266363066613666363161
          37343164346338633939393631643334646362323235326633303037373032626435363733616562
          3461626161623535350a396237376633643733666266653435333065366264303761333234613962
          3962
    rhsm_activation_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37333065636131323162326366323031353465633439313838313531616231343364356637393739
          6566363831343566323366356363306236343534626639310a646237323830313131633039613832
          36383961373461343565306234323737356164363763333366623139376365626462363139346235
          3636613763343261640a356537393461653861646234306630316238613866323337646463626631
          32313532396365346662306538646237376564326436353632333834363536613861
    rhsm_repositories_enabled:
      - rhel-9-for-x86_64-baseos-rpms
      - rhel-9-for-x86_64-appstream-rpms
      - codeready-builder-for-rhel-9-x86_64-rpms
    rhel_pkgs_to_install:
      - NetworkManager
      - bind-utils
      - yum-utils
      - tmux
      - vim-enhanced
      - qemu-kvm
      - libvirt
      - virt-install 
      - guestfs-tools
      - NetworkManager
      - ipa-client
      - sysstat
  vars_files:
    - vars/vaulted/vaulted-vars.yml

- name: Configuring base RHEL IDM hosts
  hosts: idm_hosts
  become: True
  roles:
    - role: host-setup-common
  vars:
    domain: acanorex.io
    rhsm_sys_release_version: 9
    rhsm_repositories_enabled:
      - rhel-9-for-x86_64-baseos-rpms
      - rhel-9-for-x86_64-appstream-rpms
    reboot_after_updates: true
  vars_files:
    - vars/vaulted/vaulted-vars.yml

- name: Configuring base RHEL utility host
  hosts: utility_hosts
  become: True
  roles:
    - role: host-setup-common
  vars:
    domain: acanorex.io
    rhsm_sys_release_version: 9
    rhsm_repositories_enabled:
      - rhel-9-for-x86_64-baseos-rpms
      - rhel-9-for-x86_64-appstream-rpms
      - codeready-builder-for-rhel-9-x86_64-rpms
      - ansible-automation-platform-2.5-for-rhel-9-x86_64-rpms
    rhel_pkgs_to_install:
      - NetworkManager
      - bind-utils
      - yum-utils
      - tmux
      - vim-enhanced
      - git
    reboot_after_updates: false
  vars_files:
    - vars/vaulted/vaulted-vars.yml
